/*
 * generated by Xtext 2.28.0
 */
package game.of.life.tasks.validation;

import game.of.life.tasks.tASKDSL.TASKDSLPackage
import org.eclipse.xtext.validation.Check;
import game.of.life.tasks.tASKDSL.Game

/**
 * This class contains custom validation rules. 
 *
 * See https://www.eclipse.org/Xtext/documentation/303_runtime_concepts.html#validation
 */
class TASKDSLValidator extends AbstractTASKDSLValidator {
	
	@Check 
	def checkStartGridCoordinates(Game g) //Check if start coordinates are within the grid
	{ 
	    var gs = g.gridSize;
	    var sg =g.startGrid ;
	    for(var i=0; i<sg.size;i++)
	    {
		    var height = gs.get(0).h; //grid size is set in the begining of game and it stays fixed for that game
		    var length = gs.get(0).l;
		    
		    if((sg.get(i).getXC())>=height || (sg.get(i).getXC())<0)
		    	{
		    		error("X axis out of grid",null);	
		    	}
		    if((sg.get(i).getYC())>=length || (sg.get(i).getYC())<0)
		    	{
		    		error("Y axis out of grid",null);
		    	}
	    
	    } 
	}

	
	@Check 
	def checkDoubleCoordinates(Game g)
	{ 
	//Do not allow 2 different specifications for the same coordinate for an instance of the game
	    var clist = g.startGrid 
	    for (var i= 0; i < clist.size ; i++)
	    { 
	      for (var j = i+1; j < clist.size ; j++)
	      { 
	        if ((clist.get(i).getXC().equals(clist.get(j).getXC())) && (clist.get(i).getYC().equals(clist.get(j).getYC())))
	         { 
	            error("Duplicated Coordinate!!",null) 
	         } 
	      } 
	    } 
  	} 
  	
  	
  	def checkIfCoordinateValuesPositive(Game g)
  	{
	    var iaclist = g.startGrid
	    for (var i= 0; i < iaclist.size ; i++)
	    { 
	        if ((iaclist.get(i).getXC()<0) || (iaclist.get(i).getYC()<0))
	         { 
	            error("Negative Coordinate Not Allowed!!",null) 
	         } 
	       
	    } 
  	}

}

